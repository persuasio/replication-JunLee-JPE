--------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/logs/2022.11.02-17.42.14.log.txt
  log type:  text
 opened on:   2 Nov 2022, 17:42:14

. 
. di "Begin date and time: $S_DATE $S_TIME"
Begin date and time:  2 Nov 2022 17:42:14

. di "Stata version: `c(stata_version)'"
Stata version: 17

. di "Updated as of: `c(born_date)'"
Updated as of: 23 Aug 2022

. di "Variant:       `=cond( c(MP),"MP",cond(c(SE),"SE",c(flavor)) )'"
Variant:       MP

. di "Processors:    `c(processors)'"
Processors:    4

. di "OS:            `c(os)' `c(osdtl)'"
OS:            MacOSX 12.5.1

. di "Machine type:  `c(machine_type)'"
Machine type:  Mac (Apple Silicon)

. 
. * Stata version control
. version 17

. 
. * Create directories for output files
. cap mkdir "$Persuasion/results"

. 
. **********************
. * Run analysis
. **********************
. * Effects of Uncensored Media: Revisiting Chen and Yang (2019)
. *   To generate the dataset "ChenYang2019.dta", it is necessary to run CY19_data.do 
. *   after downloading the original dataset from 
. *   the AER webpage at https://www.aeaweb.org/articles?id=10.1257/aer.20171765
. *   and storing them at "$Persuasion/data/ChenYang2019".
. *   As the dataset is already created and stored at "$Persuasion/data/ChenYang2019", 
. *   the do file is commented below.
. *do "$Persuasion/scripts/CY19_data.do"
. *   TABLE 2. Persuasion Rates of Exposure to Uncensored Internet
. *do "$Persuasion/scripts/table2.do"
. 
. *   TABLE 4. Persuasion Rates of Exposure to Uncensored Internet
. do "$Persuasion/scripts/table3.do"

. ************
. * SCRIPT:   table3.do
. * PURPOSE:  Creates Table 3
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "publicdata.dta" is from Gerber, Karlan, and Bergan (2009, AEJ Applied).
. ************
. 
. use "$Persuasion/data/GerberKarlanBergan2009/publicdata.dta", clear

. 
. **************************************
. ****       Setup                 *****
. **************************************
. 
. drop if times==1        /* drop observations with The Washing Times treatment */
(950 observations deleted)

. 
. 
. gen data_avail = 0      /* criterion to be included in the estimation sample */

. replace data_avail = 1 if survey == 1 & !missing(voteddem_all) & !missing(readsome) 
(701 real changes made)

. 
. keep if data_avail==1         /* keep observations in the estimation sample */
(1,696 observations deleted)

. 
. *** two way tables by treatment ***
. tab voteddem_all readsome if post == 1, cell

+-----------------+
| Key             |
|-----------------|
|    frequency    |
| cell percentage |
+-----------------+

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |        94         93 |       187 
           |     32.87      32.52 |     65.38 
-----------+----------------------+----------
         1 |        31         68 |        99 
           |     10.84      23.78 |     34.62 
-----------+----------------------+----------
     Total |       125        161 |       286 
           |     43.71      56.29 |    100.00 

. tab voteddem_all readsome if control == 1, cell
control not found
r(111);

end of do-file
r(111);

end of do-file

r(111);

. do "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/table3.do"

. ************
. * SCRIPT:   table3.do
. * PURPOSE:  Creates Table 3
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "publicdata.dta" is from Gerber, Karlan, and Bergan (2009, AEJ Applied).
. ************
. 
. use "$Persuasion/data/GerberKarlanBergan2009/publicdata.dta", clear

. 
. **************************************
. ****       Setup                 *****
. **************************************
. 
. drop if times==1        /* drop observations with The Washing Times treatment */
(950 observations deleted)

. 
. 
. gen data_avail = 0      /* criterion to be included in the estimation sample */

. replace data_avail = 1 if survey == 1 & !missing(voteddem_all) & !missing(readsome) 
(701 real changes made)

. 
. keep if data_avail==1         /* keep observations in the estimation sample */
(1,696 observations deleted)

. 
. *** two way tables by treatment ***
. tab voteddem_all readsome if post == 1, matcell(treat)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |        94         93 |       187 
         1 |        31         68 |        99 
-----------+----------------------+----------
     Total |       125        161 |       286 

. 
. matrix display treat
matrix operation not found
r(501);

end of do-file

r(501);

. do "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/table3.do"

. ************
. * SCRIPT:   table3.do
. * PURPOSE:  Creates Table 3
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "publicdata.dta" is from Gerber, Karlan, and Bergan (2009, AEJ Applied).
. ************
. 
. use "$Persuasion/data/GerberKarlanBergan2009/publicdata.dta", clear

. 
. **************************************
. ****       Setup                 *****
. **************************************
. 
. drop if times==1        /* drop observations with The Washing Times treatment */
(950 observations deleted)

. 
. 
. gen data_avail = 0      /* criterion to be included in the estimation sample */

. replace data_avail = 1 if survey == 1 & !missing(voteddem_all) & !missing(readsome) 
(701 real changes made)

. 
. keep if data_avail==1         /* keep observations in the estimation sample */
(1,696 observations deleted)

. 
. *** two way tables by treatment ***
. tab voteddem_all readsome if post == 1, matcell(treat)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |        94         93 |       187 
         1 |        31         68 |        99 
-----------+----------------------+----------
     Total |       125        161 |       286 

. 
. matrix a = treat

. 
. tab voteddem_all readsome if post == 0, matcell(control)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |       162        130 |       292 
         1 |        46         77 |       123 
-----------+----------------------+----------
     Total |       208        207 |       415 

. 
. 
end of do-file

. do "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/table3.do"

. ************
. * SCRIPT:   table3.do
. * PURPOSE:  Creates Table 3
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "publicdata.dta" is from Gerber, Karlan, and Bergan (2009, AEJ Applied).
. ************
. 
. use "$Persuasion/data/GerberKarlanBergan2009/publicdata.dta", clear

. 
. **************************************
. ****       Setup                 *****
. **************************************
. 
. drop if times==1        /* drop observations with The Washing Times treatment */
(950 observations deleted)

. 
. 
. gen data_avail = 0      /* criterion to be included in the estimation sample */

. replace data_avail = 1 if survey == 1 & !missing(voteddem_all) & !missing(readsome) 
(701 real changes made)

. 
. keep if data_avail==1         /* keep observations in the estimation sample */
(1,696 observations deleted)

. 
. *** two way tables by treatment ***
. tab voteddem_all readsome if post == 1, matcell(treat)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |        94         93 |       187 
         1 |        31         68 |        99 
-----------+----------------------+----------
     Total |       125        161 |       286 

. 
. frmttable using "$Persuasion/results/table3", statmat(treat) tex replace sdec(0) ///
>         title("Table 3: The Washington Post (Z = 1)")
(note: file /Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/results/table3.tex not found)
                                           Table 3: The Washington Post (Z = 1)
                                                        ----------
                                                          94  93 
                                                          31  68 
                                                        ----------


. 
. tab voteddem_all readsome if post == 0, matcell(control)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |       162        130 |       292 
         1 |        46         77 |       123 
-----------+----------------------+----------
     Total |       208        207 |       415 

. 
. frmttable using "$Persuasion/results/table3", statmat(control) tex append sdec(0) ///
>         title("Table 3: Control (Z = 0)")

                                                 Table 3: Control (Z = 0)
                                                       ------------
                                                         94   93  
                                                         31   68  
                                                         162  130 
                                                         46   77  
                                                       ------------


. 
end of do-file

. do "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/table3.do"

. ************
. * SCRIPT:   table3.do
. * PURPOSE:  Creates Table 3
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "publicdata.dta" is from Gerber, Karlan, and Bergan (2009, AEJ Applied).
. ************
. 
. use "$Persuasion/data/GerberKarlanBergan2009/publicdata.dta", clear

. 
. **************************************
. ****       Setup                 *****
. **************************************
. 
. drop if times==1        /* drop observations with The Washing Times treatment */
(950 observations deleted)

. 
. 
. gen data_avail = 0      /* criterion to be included in the estimation sample */

. replace data_avail = 1 if survey == 1 & !missing(voteddem_all) & !missing(readsome) 
(701 real changes made)

. 
. keep if data_avail==1         /* keep observations in the estimation sample */
(1,696 observations deleted)

. 
. *** two way tables by treatment ***
. tab voteddem_all readsome if post == 1, matcell(treat)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |        94         93 |       187 
         1 |        31         68 |        99 
-----------+----------------------+----------
     Total |       125        161 |       286 

. 
. frmttable using "$Persuasion/results/table3", statmat(treat) tex replace sdec(0) ///
>         title("Table 3: The Washington Post (Z = 1)") ///
>         ctitles("", "T=0", "T=1" )  ///
>         rtitles("Y=0" \ "Y=1" )
(note: file /Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/results/table3.tex not found)
                                           Table 3: The Washington Post (Z = 1)
                                                    -----------------
                                                           T=0  T=1 
                                                    -----------------
                                                     Y=0   94   93  
                                                     Y=1   31   68  
                                                    -----------------


. 
. tab voteddem_all readsome if post == 0, matcell(control)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |       162        130 |       292 
         1 |        46         77 |       123 
-----------+----------------------+----------
     Total |       208        207 |       415 

. 
. frmttable using "$Persuasion/results/table3", statmat(control) tex replace sdec(0) ///
>         title("Table 3: Control (Z = 0)")

                                                 Table 3: Control (Z = 0)
                                                       ------------
                                                         162  130 
                                                         46   77  
                                                       ------------


.         ctitles("", "T=0", "T=1" )  ///
>         rtitles("Y=0" \ "Y=1" ) 
command ctitles is unrecognized
r(199);

end of do-file

r(199);

. do "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/table3.do"

. ************
. * SCRIPT:   table3.do
. * PURPOSE:  Creates Table 3
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "publicdata.dta" is from Gerber, Karlan, and Bergan (2009, AEJ Applied).
. ************
. 
. use "$Persuasion/data/GerberKarlanBergan2009/publicdata.dta", clear

. 
. **************************************
. ****       Setup                 *****
. **************************************
. 
. drop if times==1        /* drop observations with The Washing Times treatment */
(950 observations deleted)

. 
. 
. gen data_avail = 0      /* criterion to be included in the estimation sample */

. replace data_avail = 1 if survey == 1 & !missing(voteddem_all) & !missing(readsome) 
(701 real changes made)

. 
. keep if data_avail==1         /* keep observations in the estimation sample */
(1,696 observations deleted)

. 
. *** two way tables by treatment ***
. tab voteddem_all readsome if post == 1, matcell(treat)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |        94         93 |       187 
         1 |        31         68 |        99 
-----------+----------------------+----------
     Total |       125        161 |       286 

. 
. frmttable using "$Persuasion/results/table3", statmat(treat) tex replace sdec(0) ///
>         title("Table 3: The Washington Post (Z = 1)") ///
>         ctitles("", "T=0", "T=1" )  ///
>         rtitles("Y=0" \ "Y=1" )

                                           Table 3: The Washington Post (Z = 1)
                                                    -----------------
                                                           T=0  T=1 
                                                    -----------------
                                                     Y=0   94   93  
                                                     Y=1   31   68  
                                                    -----------------


. 
. tab voteddem_all readsome if post == 0, matcell(control)

 Voted for |
  Democrat |
   in 2005 |
       Gub |
 election, | Reads paper at least
  set to 0 |   several times per
if did not |         week
      vote |         0          1 |     Total
-----------+----------------------+----------
         0 |       162        130 |       292 
         1 |        46         77 |       123 
-----------+----------------------+----------
     Total |       208        207 |       415 

. 
. frmttable using "$Persuasion/results/table3", statmat(control) tex replace sdec(0) ///
>         title("Table 3: Control (Z = 0)") ///
>         ctitles("", "T=0", "T=1" )  ///
>         rtitles("Y=0" \ "Y=1" ) 

                                                 Table 3: Control (Z = 0)
                                                    -----------------
                                                           T=0  T=1 
                                                    -----------------
                                                     Y=0   162  130 
                                                     Y=1   46   77  
                                                    -----------------


. 
end of do-file

. do "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/run.do"

. **********************
. * OVERVIEW
. *   This script generates selected tables for the paper:
. *       "IDENTIFYING THE EFFECT OF PERSUASION" (Sung Jae Jun and Sokbae Lee)
. *   All data are stored in /data
. *   All tables are outputted to /results
. * 
. * SOFTWARE REQUIREMENTS
. *   Stata version 17 or newer
. *
. * TO PERFORM A CLEAN RUN, DELETE THE FOLLOWING FOLDER:
. *   $Persuasion/results
. *
. * ACKNOWLEDGMENT
. *       The structure of the replication files is forked from 
. *   Illinois Workplace Wellness Study: Public Use Data Repository
. *   at https://github.com/reifjulian/illinois-wellness-data
. **********************
. 
. **********************
. * Parameters defined by user
. **********************
. 
. * "Persuasion" points to the root directory, which contains the subfolders "data" and "scripts"
. global Persuasion "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files"

. 
. * Number of bootstraps for Table 2
. * The published paper used nboot = 1000. Runtime is approximately ??? hours on a Windows 10 Desktop with Stata MP-6 and 
> an i7-8700 CPU 3.20 GHz processor
. * Use smaller value to run replication code faster. Runtime is approximately 1 minute with nboot = 2.
. global nboot = 10

. 
. **********************
. **********************
. 
. * Confirm that the global for the root directory has been defined
. assert !missing("$Persuasion")

. 
. * Initialize log and record system parameters
. clear 

. set more off

. cap mkdir "$Persuasion/scripts/logs"

. cap log close
