----------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/log
> s/2022.11.07-09.35.32.log.txt
  log type:  text
 opened on:   7 Nov 2022, 09:35:32

. 
. di "Begin date and time: $S_DATE $S_TIME"
Begin date and time:  7 Nov 2022 09:35:32

. di "Stata version: `c(stata_version)'"
Stata version: 16.1

. di "Updated as of: `c(born_date)'"
Updated as of: 30 Mar 2021

. di "Variant:       `=cond( c(MP),"MP",cond(c(SE),"SE",c(flavor)) )'"
Variant:       MP

. di "Processors:    `c(processors)'"
Processors:    4

. di "OS:            `c(os)' `c(osdtl)'"
OS:            MacOSX 12.4.0

. di "Machine type:  `c(machine_type)'"
Machine type:  Mac (Apple Silicon)

. 
. * Stata version control
. version 16

. 
. * Create directories for output files
. cap mkdir "$Persuasion/results"

. 
. **********************
. * Run analysis
. **********************
. * TABLE 1. Persuasion Rates: Papers on Voter Turnout
. *do "$Persuasion/scripts/table1.do"
. 
. * Effects of Uncensored Media: Revisiting Chen and Yang (2019)
. *   To generate the dataset "ChenYang2019.dta", it is necessary to run CY19_data
> .do 
. *   after downloading the original dataset from 
. *   the AER webpage at https://www.aeaweb.org/articles?id=10.1257/aer.20171765
. *   and storing them at "$Persuasion/data/ChenYang2019".
. *   As the dataset is already created and stored at "$Persuasion/data/ChenYang20
> 19", 
. *   the do file is commented below.
. *do "$Persuasion/scripts/CY19_data.do"
. *   TABLE 2. Persuasion Rates of Exposure to Uncensored Internet
. *do "$Persuasion/scripts/table2.do"
. 
. * Effects of Political News: Revisting Gerber, Karlan, and Bergan (2009) 
. *   TABLE 3. Summary Statistics of the GKB Data
. *do "$Persuasion/scripts/table3.do"
. *   TABLE 4. Estimates of the Key Parameters
. *do "$Persuasion/scripts/table4.do"
. 
. *       TABLE H1. Persuasion Rates: NTV Effects Using a Binary Instrument
. do "$Persuasion/scripts/tableH1.do"

. ************
. * SCRIPT:   tableH1.do
. * PURPOSE:  Creates Table H1
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "NTV_Individual_Data.dta" is from Enikolopov, Petrov
> a, and Zhuravskaya (AER, 2011).
. ************
. 
. use "$Persuasion/data/EnikolopovPetrovaZhuravskaya2011/NTV_Individual_Data.dta",
>  clear

. 
. local basic = "logpop98 wage98_ln"

. local sociodem = "male age educ1 married consump"

. 
. local party_list = "Unity OVR"

. 
. *** create outcome variables based on directional treatment ***
. 
. gen y_vote_Unity = 0

. replace y_vote_Unity = 1 if vote_Unity == 0   
(993 real changes made)

. 
. gen y_vote_OVR = 0

. replace y_vote_OVR = 1 if vote_OVR == 1   
(166 real changes made)

. 
. *** create a binary instrument ***
. 
. svyset [pweight=kishweig]

      pweight: kishweig
          VCE: linearized
  Single unit: missing
     Strata 1: <one>
         SU 1: <observations>
        FPC 1: <zero>

. 
. _pctile tvmaxtveloss5050powerA [pweight=kishweig], p(50)         

. scalar IV = r(r1)        

. 
.         gen IV_NTV = 0

. replace IV_NTV = 1 if tvmaxtveloss5050powerA > IV
(2,142 real changes made)

. 
. *** predict Z ***
. 
. *quietly probit  IV_NTV `sociodem' `basic' [pweight=kishweig]  
. probit  IV_NTV `sociodem' `basic' [pweight=kishweig]  

Iteration 0:   log pseudolikelihood = -897.56596  
Iteration 1:   log pseudolikelihood =  -377.4733  
Iteration 2:   log pseudolikelihood = -375.96839  
Iteration 3:   log pseudolikelihood = -375.96241  
Iteration 4:   log pseudolikelihood = -375.96241  

Probit regression                               Number of obs     =      1,300
                                                Wald chi2(7)      =     434.31
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -375.96241               Pseudo R2         =     0.5811

------------------------------------------------------------------------------
             |               Robust
      IV_NTV |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        male |   .0194095    .119127     0.16   0.871    -.2140752    .2528941
         age |   .0015902   .0036186     0.44   0.660    -.0055021    .0086825
       educ1 |   .0596368   .1473923     0.40   0.686    -.2292468    .3485203
     married |  -.1636445   .1206162    -1.36   0.175     -.400048    .0727589
     consump |   .0839782   .0441933     1.90   0.057     -.002639    .1705954
    logpop98 |   .8995543   .0471699    19.07   0.000      .807103    .9920055
   wage98_ln |    1.48292   .1493027     9.93   0.000     1.190292    1.775548
       _cons |   -14.4872   1.115978   -12.98   0.000    -16.67448   -12.29992
------------------------------------------------------------------------------

. predict phat_Z1
(option pr assumed; Pr(IV_NTV))
(4,658 missing values generated)

. 
. sadfaf
command sadfaf is unrecognized
r(199);

end of do-file
r(199);

end of do-file

r(199);

. svy: mean IV_NTV
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =       1        Number of obs   =      1,783
Number of PSUs   =   1,783        Population size = 1,792.0433
                                  Design df       =      1,782

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
      IV_NTV |   .5692098   .0128091      .5440873    .5943323
--------------------------------------------------------------

. sum IV_NTV

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      IV_NTV |      5,958    .3595166     .479899          0          1

. sum logpop98 wage98_ln

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    logpop98 |      2,570    5.216949    1.379309   2.388763   7.224753
   wage98_ln |      2,570    6.802758    .4639504   5.807241   8.160519

. sum male age educ1 married consump

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        male |      5,958    .1067472    .3088175          0          1
         age |      1,783      30.788    17.28197          0         71
       educ1 |      1,776    .7702703    .4207775          0          1
     married |      1,778    .5590551    .4966399          0          1
     consump |      1,760    1.506818    1.365938          0          7

. do "/var/folders/gs/trgtqjb10hdfl_8tbw1z7q3c0000gn/T//SD07287.000000"

. ************
. * SCRIPT:   tableH1.do
. * PURPOSE:  Creates Table H1
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "NTV_Individual_Data.dta" is from Enikolopov, Petrov
> a, and Zhuravskaya (AER, 2011).
. ************
. 
. use "$Persuasion/data/EnikolopovPetrovaZhuravskaya2011/NTV_Individual_Data.dta",
>  clear

. 
. local basic = "logpop98 wage98_ln"

. local sociodem = "male age educ1 married consump"

. 
. local party_list = "Unity OVR"

. 
. *** create outcome variables based on directional treatment ***
. 
. gen y_vote_Unity = 0

. replace y_vote_Unity = 1 if vote_Unity == 0   
(993 real changes made)

. 
. gen y_vote_OVR = 0

. replace y_vote_OVR = 1 if vote_OVR == 1   
(166 real changes made)

. 
. *** create a binary instrument ***
. 
. svyset [pweight=kishweig]

      pweight: kishweig
          VCE: linearized
  Single unit: missing
     Strata 1: <one>
         SU 1: <observations>
        FPC 1: <zero>

. 
. _pctile tvmaxtveloss5050powerA [pweight=kishweig], p(50)         

. scalar IV = r(r1)        

. 
.         gen IV_NTV = 0

. replace IV_NTV = 1 if tvmaxtveloss5050powerA > IV
(2,142 real changes made)

. 
. *** predict Z ***
. 
. *quietly probit  IV_NTV `sociodem' `basic' [pweight=kishweig]  
. 
. svy: mean IV_NTV `sociodem' `basic'
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =       1        Number of obs   =      1,300
Number of PSUs   =   1,300        Population size = 1,312.0491
                                  Design df       =      1,299

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
      IV_NTV |   .5671753   .0150487      .5376528    .5966978
        male |   .3825828   .0147982      .3535519    .4116137
         age |   29.33457    .504959      28.34395     30.3252
       educ1 |   .7837737    .012397      .7594534     .808094
     married |   .6546334   .0138906       .627383    .6818838
     consump |   1.516561   .0418035      1.434551    1.598571
    logpop98 |   5.113802   .0424172      5.030589    5.197016
   wage98_ln |   6.735794   .0130092      6.710272    6.761315
--------------------------------------------------------------

. 
. probit  IV_NTV `sociodem' `basic' [pweight=kishweig]  

Iteration 0:   log pseudolikelihood = -897.56596  
Iteration 1:   log pseudolikelihood =  -377.4733  
Iteration 2:   log pseudolikelihood = -375.96839  
Iteration 3:   log pseudolikelihood = -375.96241  
Iteration 4:   log pseudolikelihood = -375.96241  

Probit regression                               Number of obs     =      1,300
                                                Wald chi2(7)      =     434.31
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -375.96241               Pseudo R2         =     0.5811

------------------------------------------------------------------------------
             |               Robust
      IV_NTV |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        male |   .0194095    .119127     0.16   0.871    -.2140752    .2528941
         age |   .0015902   .0036186     0.44   0.660    -.0055021    .0086825
       educ1 |   .0596368   .1473923     0.40   0.686    -.2292468    .3485203
     married |  -.1636445   .1206162    -1.36   0.175     -.400048    .0727589
     consump |   .0839782   .0441933     1.90   0.057     -.002639    .1705954
    logpop98 |   .8995543   .0471699    19.07   0.000      .807103    .9920055
   wage98_ln |    1.48292   .1493027     9.93   0.000     1.190292    1.775548
       _cons |   -14.4872   1.115978   -12.98   0.000    -16.67448   -12.29992
------------------------------------------------------------------------------

. predict phat_Z1
(option pr assumed; Pr(IV_NTV))
(4,658 missing values generated)

. 
. sadfaf
command sadfaf is unrecognized
r(199);

end of do-file

r(199);

. do "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/run.do"

. **********************
. * OVERVIEW
. *   This script generates selected tables for the paper:
. *       "IDENTIFYING THE EFFECT OF PERSUASION" (Sung Jae Jun and Sokbae Lee)
. *   All data are stored in /data
. *   All tables are outputted to /results
. * 
. * SOFTWARE REQUIREMENTS
. *   Stata version 17 or newer
. *
. * PACKAGE REQUIREMENTS
. *   persuasio (can be installed by ssc install persuasio, replace)
. *   outreg (can be installed by ssc install outreg, replace)
. *
. * TO PERFORM A CLEAN RUN, DELETE THE FOLLOWING FOLDER:
. *   $Persuasion/results
. *
. * ACKNOWLEDGMENT
. *       The structure of the replication files is forked from 
. *   Illinois Workplace Wellness Study: Public Use Data Repository
. *   at https://github.com/reifjulian/illinois-wellness-data
. **********************
. 
. **********************
. * Parameters defined by user
. **********************
. 
. * "Persuasion" points to the root directory, which contains the subfolders "data
> " and "scripts"
. global Persuasion "/Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files"

. 
. * Number of bootstraps for Table 2
. * The published paper used nbt = 10000. Runtime is approximately 3 hours on an i
> Mac (M1, 2021).
. * Use nbt = 10 to check whether replication code runs without an error. 
. global nbt = 10000

. 
. * set seed for replicability 
. set seed 987975 

. 
. **********************
. **********************
. 
. * Confirm that the global for the root directory has been defined
. assert !missing("$Persuasion")

. 
. * Initialize log and record system parameters
. clear 

. set more off

. cap mkdir "$Persuasion/scripts/logs"

. cap log close
