----------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/log
> s/2022.11.07-12.54.52.log.txt
  log type:  text
 opened on:   7 Nov 2022, 12:54:52

. 
. di "Begin date and time: $S_DATE $S_TIME"
Begin date and time:  7 Nov 2022 12:54:52

. di "Stata version: `c(stata_version)'"
Stata version: 16.1

. di "Updated as of: `c(born_date)'"
Updated as of: 30 Mar 2021

. di "Variant:       `=cond( c(MP),"MP",cond(c(SE),"SE",c(flavor)) )'"
Variant:       MP

. di "Processors:    `c(processors)'"
Processors:    4

. di "OS:            `c(os)' `c(osdtl)'"
OS:            MacOSX 12.4.0

. di "Machine type:  `c(machine_type)'"
Machine type:  Mac (Apple Silicon)

. 
. * Stata version control
. version 16

. 
. * Create directories for output files
. cap mkdir "$Persuasion/results"

. 
. **********************
. * Run analysis
. **********************
. * TABLE 1. Persuasion Rates: Papers on Voter Turnout
. *do "$Persuasion/scripts/table1.do"
. 
. * Effects of Uncensored Media: Revisiting Chen and Yang (2019)
. *   To generate the dataset "ChenYang2019.dta", it is necessary to run CY19_data
> .do 
. *   after downloading the original dataset from 
. *   the AER webpage at https://www.aeaweb.org/articles?id=10.1257/aer.20171765
. *   and storing them at "$Persuasion/data/ChenYang2019".
. *   As the dataset is already created and stored at "$Persuasion/data/ChenYang20
> 19", 
. *   the do file is commented below.
. *do "$Persuasion/scripts/CY19_data.do"
. *   TABLE 2. Persuasion Rates of Exposure to Uncensored Internet
. *do "$Persuasion/scripts/table2.do"
. 
. * Effects of Political News: Revisting Gerber, Karlan, and Bergan (2009) 
. *   TABLE 3. Summary Statistics of the GKB Data
. *do "$Persuasion/scripts/table3.do"
. *   TABLE 4. Estimates of the Key Parameters
. *do "$Persuasion/scripts/table4.do"
. 
. *       TABLE D1. Persuasion Rates: Fox News Effects
. do "$Persuasion/scripts/tableD1.do"

. ************
. * SCRIPT:   tableD1.do
. * PURPOSE:  Creates Table D1
. *
. * ACKNOWLEDGMENT
. *       The orginal dataset "FoxNewsFinalDataQJE" is from DellaVigna and Kaplan 
> (QJE, 2007).
. *       The dataset is available at http://eml.berkeley.edu/~sdellavi/index.html
> .
. *   We thank the authors of the paper to make their data available online. 
. *
. * NOTES
. *       An alternative measure of the dependent variable is used. 
. *   That is, Y = (Republican voting share as a share of the voting-age populatio
> n) 
. ************
. 
. use "$Persuasion/data/DellaVignaKaplan2007/FoxNewsFinalDataQJE.dta", clear

. 
. *** Generate macros of controls
. ** Census Controls
. foreach tc in "2000" "00m90" {
  2.         global contrcens`tc'= "pop`tc' hs`tc' hsp`tc' college`tc' male`tc' bl
> ack`tc' hisp`tc' empl`tc' unempl`tc' married`tc' income`tc' urban`tc'"
  3.         global contrcenssh`tc'stat= "pop`tc'stat hsp`tc' college`tc' black`tc
> ' hisp`tc' unempl`tc' urban`tc'"
  4. }

. ** Cable Controls
. foreach tc in "2000" {
  2.         global contrcbl`tc'= "poptot`tc'd2-poptot`tc'd10 noch`tc'd2-noch`tc'd
> 10"
  3.         }

. 
. ** Keep only basic sample
. keep if sample12000==1
(870 observations deleted)

. 
. * Table V -- Presidential Effects -- Robustness and Presidential Delayed Effects
. * Lagged vote share
. 
. gen new_y2000 = reppresvotes2000/pop18p2000

. gen new_y1996 = reppresvotes1996/pop18p1996

. 
. sum new_y2000 new_y1996 [aweight=totpresvotes1996]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
   new_y2000 |   9,256    32912454    .4163778   1.120204   .0008402      96.25
   new_y1996 |   9,256    32912454    .3345691   .8960611   .0009127      67.75

. 
. areg new_y2000 new_y1996 foxnews2000 $contrcens2000 $contrcens00m90 $contrcbl200
> 0 if sample12000==1 [aweight=pop18p1996], a(diststate) robust cluster(account200
> 0)
(sum of wgt is 64,558,385.437175)

Linear regression, absorbing indicators         Number of obs     =      9,256
Absorbed variable: diststate                    No. of categories =        235
                                                F(  44,   2991)   =    1016.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9785
                                                Adj R-squared     =     0.9778
                                                Root MSE          =     0.0348

                         (Std. Err. adjusted for 2,992 clusters in account2000)
-------------------------------------------------------------------------------
              |               Robust
    new_y2000 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
    new_y1996 |   1.208599    .031613    38.23   0.000     1.146613    1.270584
  foxnews2000 |   .0041596   .0018338     2.27   0.023     .0005639    .0077553
      pop2000 |  -5.41e-06   .0000777    -0.07   0.945    -.0001577    .0001469
       hs2000 |   .0924216    .021966     4.21   0.000     .0493517    .1354915
      hsp2000 |   .0398735   .0192533     2.07   0.038     .0021224    .0776246
  college2000 |  -.0623826   .0126107    -4.95   0.000    -.0871092    -.037656
     male2000 |   .1119049   .0409483     2.73   0.006     .0316152    .1921947
    black2000 |  -.0133176    .007727    -1.72   0.085    -.0284684    .0018333
     hisp2000 |   .0227571   .0135419     1.68   0.093    -.0037952    .0493094
     empl2000 |   .0975415   .0120083     8.12   0.000     .0739962    .1210868
   unempl2000 |   .1577499   .0492045     3.21   0.001     .0612718    .2542281
  married2000 |  -.0468824   .0285046    -1.64   0.100     -.102773    .0090082
   income2000 |   -.000861   .0008582    -1.00   0.316    -.0025436    .0008217
    urban2000 |  -.0200967   .0022458    -8.95   0.000    -.0245001   -.0156933
     pop00m90 |   .0000293   .0009008     0.03   0.974     -.001737    .0017956
      hs00m90 |  -.0286676   .0188859    -1.52   0.129    -.0656982    .0083631
     hsp00m90 |    .035016   .0250322     1.40   0.162     -.014066     .084098
 college00m90 |   .1348575   .0308983     4.36   0.000     .0742735    .1954416
    male00m90 |  -.1375726   .0508999    -2.70   0.007     -.237375   -.0377702
   black00m90 |  -.1072407   .0185453    -5.78   0.000    -.1436036   -.0708778
    hisp00m90 |   -.152629    .025505    -5.98   0.000    -.2026382   -.1026198
    empl00m90 |   -.034634   .0231346    -1.50   0.134    -.0799954    .0107274
  unempl00m90 |  -.0697724   .0412358    -1.69   0.091    -.1506257     .011081
 married00m90 |   .0405856   .0208465     1.95   0.052    -.0002894    .0814606
  income00m90 |   .0018172   .0015083     1.20   0.228    -.0011402    .0047745
   urban00m90 |   .0074828   .0057738     1.30   0.195    -.0038383    .0188039
 poptot2000d2 |  -.0194795   .0055849    -3.49   0.000      -.03043   -.0085289
 poptot2000d3 |  -.0214814   .0056321    -3.81   0.000    -.0325246   -.0104383
 poptot2000d4 |   -.022605   .0056643    -3.99   0.000    -.0337113   -.0114988
 poptot2000d5 |  -.0209296   .0065239    -3.21   0.001    -.0337214   -.0081378
 poptot2000d6 |  -.0226763   .0058672    -3.86   0.000    -.0341804   -.0111722
 poptot2000d7 |  -.0258937   .0059106    -4.38   0.000    -.0374829   -.0143045
 poptot2000d8 |  -.0262695   .0057284    -4.59   0.000    -.0375016   -.0150375
 poptot2000d9 |  -.0269433   .0059681    -4.51   0.000    -.0386454   -.0152413
poptot2000d10 |   -.027168   .0064039    -4.24   0.000    -.0397244   -.0146115
   noch2000d2 |   .0023185   .0022013     1.05   0.292    -.0019977    .0066346
   noch2000d3 |   .0021131   .0023683     0.89   0.372    -.0025306    .0067569
   noch2000d4 |   .0042461   .0024298     1.75   0.081    -.0005181    .0090103
   noch2000d5 |   .0025915   .0023483     1.10   0.270    -.0020129    .0071959
   noch2000d6 |   .0042029   .0022084     1.90   0.057    -.0001273    .0085332
   noch2000d7 |   .0026505   .0024131     1.10   0.272     -.002081     .007382
   noch2000d8 |   .0033207   .0030386     1.09   0.275    -.0026373    .0092787
   noch2000d9 |   .0017097   .0026733     0.64   0.523    -.0035321    .0069514
  noch2000d10 |    .000449   .0028023     0.16   0.873    -.0050456    .0059435
        _cons |  -.0763635   .0246335    -3.10   0.002     -.124664   -.0280631
-------------------------------------------------------------------------------

. matrix reg_b = e(b)

. predict yhat, xbd 

. 
. *** predict Y given Z=1 and Z=0
. 
. scalar coeff_b = reg_b[1,2]

. scalar list coeff_b
   coeff_b =   .0041596

. gen yhat1 = yhat + coeff_b - coeff_b*foxnews2000

. gen yhat0 = yhat - coeff_b*foxnews2000

. 
. replace yhat1 = min(max(yhat1,0),1)
(180 real changes made)

. replace yhat0 = min(max(yhat0,0),1)
(182 real changes made)

. 
. gen thetahat_num = (yhat1-yhat0)

. gen thetahat_den = (1-yhat0)

. replace thetahat_den = max(thetahat_den, 1e-8)
(167 real changes made)

. gen thetahat = thetahat_num/thetahat_den

. 
. *** Lower bound for theta 
. 
. sum thetahat if auddiaryScar > 0 [aweight=auddiaryScar]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
    thetahat |     568       11388    .0052496   .0016251          0   .0623692

. 
. 
. * Table VIII -- Audience Data and Persuasion Rates
. 
. 
. * Baseline Spec.
. areg foxanyScar foxnews2000 $contrcens2000 $contrcens00m90 $contrcbl2000 if samp
> le12000==1 [aweight=auddiaryScar], a(diststate) robust cluster(account2000)
(sum of wgt is 11,388)

Linear regression, absorbing indicators         Number of obs     =        568
Absorbed variable: diststate                    No. of categories =         64
                                                F(  43,    181)   =       4.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.3105
                                                Adj R-squared     =     0.1520
                                                Root MSE          =     0.0460

                           (Std. Err. adjusted for 182 clusters in account2000)
-------------------------------------------------------------------------------
              |               Robust
   foxanyScar |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
  foxnews2000 |   .0371012   .0111603     3.32   0.001     .0150801    .0591223
      pop2000 |  -.0002104   .0003945    -0.53   0.594    -.0009889     .000568
       hs2000 |   -.187702   .1430182    -1.31   0.191    -.4698993    .0944953
      hsp2000 |   .0569448   .1107134     0.51   0.608    -.1615101    .2753997
  college2000 |  -.0231069   .0901376    -0.26   0.798    -.2009626    .1547488
     male2000 |  -.0610881   .1753305    -0.35   0.728    -.4070426    .2848665
    black2000 |  -.0494883    .032203    -1.54   0.126    -.1130299    .0140532
     hisp2000 |   -.082742   .0647342    -1.28   0.203    -.2104727    .0449888
     empl2000 |   .0782463   .0710645     1.10   0.272    -.0619751    .2184677
   unempl2000 |   .0394691   .2040761     0.19   0.847    -.3632051    .4421434
  married2000 |  -.0072708   .0732366    -0.10   0.921     -.151778    .1372365
   income2000 |  -.0030205   .0029534    -1.02   0.308    -.0088481    .0028071
    urban2000 |  -.0233733   .0213478    -1.09   0.275    -.0654958    .0187492
     pop00m90 |   .0010764   .0034601     0.31   0.756     -.005751    .0079038
      hs00m90 |   .0138687   .1648048     0.08   0.933    -.3113171    .3390545
     hsp00m90 |   .0165906   .1588608     0.10   0.917    -.2968666    .3300478
 college00m90 |   -.208976   .1727144    -1.21   0.228    -.5497685    .1318166
    male00m90 |   .3649827   .2171625     1.68   0.095     -.063513    .7934784
   black00m90 |  -.1208537   .0909009    -1.33   0.185    -.3002155     .058508
    hisp00m90 |   .0440202   .1103467     0.40   0.690    -.1737111    .2617515
    empl00m90 |   .0279898   .0937496     0.30   0.766    -.1569929    .2129724
  unempl00m90 |  -.0420223   .2213947    -0.19   0.850    -.4788688    .3948241
 married00m90 |   .0097304   .1249246     0.08   0.938    -.2367655    .2562263
  income00m90 |   .0039804   .0038216     1.04   0.299    -.0035602    .0115211
   urban00m90 |   .0071949   .0170066     0.42   0.673    -.0263618    .0407515
 poptot2000d2 |  -.0015988   .0314486    -0.05   0.960    -.0636519    .0604542
 poptot2000d3 |   .0506067   .0345219     1.47   0.144    -.0175104    .1187238
 poptot2000d4 |   .0877663   .0409848     2.14   0.034     .0068969    .1686356
 poptot2000d5 |   .0677766   .0333425     2.03   0.044     .0019865    .1335666
 poptot2000d6 |    .061765   .0335141     1.84   0.067    -.0043635    .1278935
 poptot2000d7 |   .0603022   .0328886     1.83   0.068    -.0045922    .1251966
 poptot2000d8 |   .0563261   .0298523     1.89   0.061    -.0025772    .1152294
 poptot2000d9 |   .0531993   .0307697     1.73   0.086    -.0075142    .1139128
poptot2000d10 |   .0479035   .0287006     1.67   0.097    -.0087273    .1045342
   noch2000d2 |  -.0357018   .0194547    -1.84   0.068     -.074089    .0026853
   noch2000d3 |  -.0389095   .0192428    -2.02   0.045    -.0768786   -.0009403
   noch2000d4 |  -.0543952   .0160518    -3.39   0.001    -.0860679   -.0227225
   noch2000d5 |  -.0278834   .0191634    -1.46   0.147    -.0656959     .009929
   noch2000d6 |   -.033401    .016623    -2.01   0.046    -.0662008   -.0006012
   noch2000d7 |  -.0475923   .0170507    -2.79   0.006     -.081236   -.0139486
   noch2000d8 |  -.0364809   .0163035    -2.24   0.026    -.0686503   -.0043115
   noch2000d9 |  -.0270905   .0173941    -1.56   0.121    -.0614117    .0072308
  noch2000d10 |  -.0483096   .0190346    -2.54   0.012    -.0858679   -.0107512
        _cons |   .0928317   .1115316     0.83   0.406    -.1272377    .3129012
-------------------------------------------------------------------------------

. matrix reg_b = e(b)

. predict ehat, xbd 
(8,688 missing values generated)

. 
. 
. *** predict exposure rates given Z=1 and Z=0
. 
. scalar coeff_b = reg_b[1,1]

. scalar list coeff_b
   coeff_b =  .03710124

. gen ehat1 = ehat + coeff_b - coeff_b*foxnews2000
(8,688 missing values generated)

. gen ehat0 = ehat - coeff_b*foxnews2000
(8,688 missing values generated)

. 
. replace ehat1 = min(max(ehat1,0),1)
(8,691 real changes made)

. replace ehat0 = min(max(ehat0,0),1)
(8,770 real changes made)

. 
. *** compute the upper bound for theta
. 
. gen ub_num1 = yhat1 + 1 - ehat1

. gen ub_num2 = yhat0 - ehat0

. gen ub_num = min(1, ub_num1) - max(0,ub_num2)

. gen ub_den = 1 - max(0,ub_num2)

. replace ub_den = max(ub_den, 1e-8)
(161 real changes made)

. 
. gen thetahat_up = ub_num/ub_den

. sum thetahat_up ub_num1 ub_num2 ub_num ub_den  if auddiaryScar > 0 [aweight=audd
> iaryScar]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
 thetahat_up |     568       11388      .99144   .0766226          0          1
     ub_num1 |     568       11388    1.143617   .1266169   .9125439          2
     ub_num2 |     568       11388    .1750117   .1264461  -.0545144          1
      ub_num |     568       11388    .8214548   .1219074          0    .982313
      ub_den |     568       11388    .8242112   .1252421   1.00e-08          1

. 
. 
. *** compute the lower bound for theta_local
. 
. gen theta_local_den = min((1-yhat0),(ehat1-ehat0))

. 
. gen late_weight = (ehat1-ehat0)

. sum late_weight if auddiaryScar > 0 [aweight=auddiaryScar]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
 late_weight |     568       11388    .0355156    .005265          0   .0371012

. replace late_weight = late_weight/r(mean)
(563 real changes made)

. 
. gen theta_local = (thetahat_num/theta_local_den)*late_weight
(8,703 missing values generated)

. replace theta_local = min(max(theta_local,0),1)
(8,703 real changes made)

. 
. sum theta_local  if auddiaryScar > 0 [aweight=auddiaryScar]

    Variable |     Obs      Weight        Mean   Std. Dev.       Min        Max
-------------+-----------------------------------------------------------------
 theta_local |     568       11388    .1152999   .0145003          0   .1171211

. dis "The lower bound of theta_late = " r(mean)
The lower bound of theta_late = .11529987

. 
. 
end of do-file

. 
. *       TABLE E1. Persuasive Effect by Treatment in Landry et al. (2006)
. *do "$Persuasion/scripts/tableE1.do"
. 
. *       TABLE E2. Persuasive Effect by Treatment in DLM
. *do "$Persuasion/scripts/tableE2.do"
. 
. *       TABLE H1. Persuasion Rates: NTV Effects Using a Binary Instrument
. *do "$Persuasion/scripts/tableH1.do"
. 
. 
. 
. 
. * End log
. di "End date and time: $S_DATE $S_TIME"
End date and time:  7 Nov 2022 12:54:52

. log close
      name:  <unnamed>
       log:  /Users/sokbaelee/Dropbox/Persuasion/JPE/Replication Files/scripts/log
> s/2022.11.07-12.54.52.log.txt
  log type:  text
 closed on:   7 Nov 2022, 12:54:52
----------------------------------------------------------------------------------
